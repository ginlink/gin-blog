---
sidebar_position: 20
title: 5-21
tags:
  - æ—¥å¸¸è®°å½•
---



## 1 Docusaurus æ— æ³•å¤„ç†å›¾ç‰‡ç¼©æ”¾ zoom

### è¡¨ç°

æ— æ³•æ­£å¸¸æ‰“åŒ…

```
[ERROR] Docusaurus Node/SSR could not render static page
```

### è§£å†³æ–¹æ¡ˆ

```tsx
<img src="https://cdn.gincool.com//img/image-20211015114938140.png" alt="image-20211015114938140" style="zoom: 25%;" />

// å°†zoomå»æ‰
<img src="https://cdn.gincool.com//img/image-20211015114938140.png" alt="image-20211015114938140" />
```

## 2 styled-systemé…ç½®variant(å˜ä½“)

### æ–¹å¼ä¸€

```tsx
import { styleVariants } from './theme.ts'
import { ButtonProps } from './types.ts'

const Button = styled.button<ButtonProps>`
  ${variant({
    variants: styleVariants,
  })}
`
```

```ts
// theme.ts
const styleVariants: {
  [variant: Variant]: Record<string, string>
} = {
  [variants.PRIMARY]: {
    backgroundColor: 'primary',
    // styled-system ä¼šè‡ªåŠ¨æ‰¾åˆ° theme.colors.primary
    // é‚£å¦‚ä½•æ‰¾åˆ° theme.colors.gradient.primary å‘¢ï¼Ÿ
    // è§æ–¹æ³•äºŒ
    color: 'white',
  },
  [variants.SECONDARY]: {
    backgroundColor: 'transparent',
    color: 'primary',
    border: '2px solid',
    borderColor: 'primary',
    boxShadow: 'none',
    ':disabled': {
      backgroundColor: 'transparent',
    },
  },
}
```

```ts
// types.ts
export const variants = {
  PRIMARY: "primary",
  SECONDARY: "secondary"
} as const

export type Variant = typeof variants[typeof variants]

export interface ButtonProps {
  variant: Variant
}
```

### æ–¹å¼äºŒï¼šæ‰¾åˆ°å†…å®¹ä¸»é¢˜

```tsx
const createStyleVariants = (theme: MyTheme) => {
  [variants.PRIMARY]: {
    backgroundColor: theme.colors.gradient.primary,
    color: 'white',
  },
  [variants.SECONDARY]: {
    backgroundColor: 'transparent',
    color: 'primary',
    border: '2px solid',
    borderColor: 'primary',
    boxShadow: 'none',
    ':disabled': {
      backgroundColor: 'transparent',
    },
  },
}

const Button = styled.button`
  ${({theme})=> variant({
    variants: createStyleVariants(theme),
  })}
`
```

[1] Using theme properties in variants (with typescript) #986.https://github.com/styled-system/styled-system/issues/986

[2] pancake-frontend.https://github.com/pancakeswap/pancake-frontend

## 3 vscode å¤šè¡Œæ’å…¥é€’å¢æ•°å­—

ğŸ·ï¼šå·¥å…·

### æ’ä»¶

```
increament selection
```

![image-20220522110550619](https://cdn.gincool.com/img/image-20220522110550619.png)

### æ–¹æ³•

å¤šè¡Œé€‰ä¸­ï¼Œ`cmd+option+æ–¹å‘ä¸‹` æˆ–è€… æŒ‰ä½ cmdåŒæ—¶å·¦é”®å•å‡»å…¶ä»–è¡Œ

ä»0å¼€å§‹ï¼Œç›´æ¥  `cmd+option+i`

![image-20220522110352125](https://cdn.gincool.com/img/image-20220522110352125.png)

ä»æŒ‡å®šæ•°å­—å¼€å§‹ï¼Œå…ˆè¾“å…¥100ï¼Œé€‰ä¸­ï¼Œå†æŒ‰ `cmd+option+i`

![image-20220522110421706](https://cdn.gincool.com/img/image-20220522110421706.png)

[1] vscodeåŒæ—¶ç¼–è¾‘å¤šè¡Œï¼Œæ’å…¥é€’å¢æ•°å­—ã€Increment Selectionã€‘.https://blog.csdn.net/qq_36405172/article/details/120240926?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-120240926-blog-90719829.pc_relevant_default&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-120240926-blog-90719829.pc_relevant_default&utm_relevant_index=1

## 4 vscode æ£€æŸ¥å•è¯æ‹¼å†™

### æ’ä»¶

```
Code Spell Checker
```

![image-20220522110800253](https://cdn.gincool.com/img/image-20220522110800253.png)

### æ•ˆæœ

é”™è¯¯ `è“çº¿` æç¤º

![image-20220522110935368](https://cdn.gincool.com/img/image-20220522110935368.png)

è‡ªåŠ¨ä¿®å¤ï¼Œ`cmd+.`

![image-20220522111033834](https://cdn.gincool.com/img/image-20220522111033834.png)

## 5 Docusaurus é…ç½®gitalk

æ­¥éª¤ï¼š1.å¯¼å‡º 2.ç”³è¯·application 3.é…ç½®gitalk 4.å¼•å…¥

### æ­¥éª¤ä¸€ï¼šå¯¼å‡º

```sh
yarn run swizzle @docusaurus/theme-classic DocPage/Layout/Main
```

æ³¨æ„ï¼šå¯ä»¥å¯¼å‡ºå¾ˆå¤šé¡¹ç›®ï¼Œè¿™é‡Œåªå¯¼å‡ºæ–‡æ¡£çš„Layoutçš„Mainï¼Œè¯¦è§ [swizzling](https://docusaurus.io/docs/swizzling)

### æ­¥éª¤äºŒï¼šç”³è¯·application

å» https://github.com/settings/applications/new ç”³è¯·

æ³¨å†Œæ—¶`Homepage URL`ã€`Authorization callback URL`éƒ½å¡«å†™ç½‘ç«™åŸŸåå³å¯ï¼Œå¦‚`https://www.banli17.com/`ã€‚

æ³¨å†Œå®Œæˆåï¼Œå°±å¯ä»¥çœ‹åˆ° ID äº†ã€‚

- clientIDã€clientSecret: æ³¨å†Œåº”ç”¨åï¼Œå¯ä»¥çœ‹åˆ°ã€‚ä¹Ÿå¯ä»¥åœ¨ github çš„`settings -> Developer settings -> OAuth Apps`çœ‹åˆ°ã€‚
- repo: åœ¨ github æ–°å»ºä¸€ä¸ªé¡¹ç›®`blog_comment`(åå­—å¯éšæ„ï¼Œæ³¨æ„å¡«å†™çš„ä¸æ˜¯githubåœ°å€ï¼Œè€Œæ˜¯é¡¹ç›®å)ï¼Œè¯„è®ºä¼šä¿å­˜åˆ°è¿™ä¸ªé¡¹ç›®çš„ issue ä¸­ã€‚

### æ­¥éª¤ä¸‰ï¼šå¼•å…¥

```tsx
// src/theme/GitalkComment.tsx
import React, { Component } from 'react'
import 'gitalk/dist/gitalk.css'
import Gitalk from 'gitalk'

class GitalkComment extends Component {
  componentDidMount() {
    var gitalk = new Gitalk({
      clientID: '54aafde3eb7291b3b28d',
      clientSecret: '336373fcdef4b031ecc887d3803424bf7c2cbd4e',
      repo: 'gin-blog', // ä»“åº“åç§°
      owner: 'ginlink', // ä»“åº“ä½œè€…
      admin: ['ginlink'],
      id: location.pathname, // Ensure uniqueness and length less than 50
      distractionFreeMode: false, // Facebook-like distraction free mode
    })

    gitalk.render('gitalk-container')
  }

  render() {
    return <div id="gitalk-container"></div>
  }
}
export default GitalkComment
```

```jsx
// src/theme/DocPage/Layout/Main/index.tsx
import GitalkComment from '@site/src/theme/GitalkComment'

...

<div
  className={clsx(
    'container padding-top--md padding-bottom--lg',
    styles.docItemWrapper,
    hiddenSidebarContainer && styles.docItemWrapperEnhanced
  )}
  >
  {children}

  <GitalkComment />
</div>
```

[1] è½¬-å¦‚ä½•ç»™Docusaurusæ·»åŠ Gitalkæ’ä»¶.https://sustech-canstudio.github.io/blog/gitalk/

## 6 [Babel] You gave us a visitor for the node type StaticBlock but it's not a valid type.

### åŸå› 

> I think there's a babel version inconsistency between `CRA@4 and Storybook@6`, but I'm not sure what's the proper fix.

### è§£å†³æ–¹æ¡ˆ

```sh
rm yarn.lock && yarn
```

[1] Error: You gave us a visitor for the node type StaticBlock but it's not a valid type.https://github.com/storybookjs/storybook/issues/12893

## 7 uniswap-interface monorepoé¡¹ç›®æ— æ³•æ­£å¸¸å¯åŠ¨

é¡¹ç›®ç¤ºä¾‹è§ï¼šhttps://github.com/ginlink/swap

### é”™è¯¯ä¸€ï¼šæç¤º `<ErrorBoundary>` ä¸ React.ReaceNode é—®é¢˜

##### åŸå› 

`@types/react18` ä¸ `@types/react17` ç±»å‹å£°æ˜å¹¶ä¸å…¼å®¹

##### è§£å†³æ–¹æ¡ˆ

æœ€å¤–å±‚package.jsoné”å®šç‰ˆæœ¬

```json
"resolutions": {
  "babel-loader": "8.1.0",
  "@types/react": "^17.0.1",
  "@web3-react/abstract-connector": "^6.0.7"
}
```

### é”™è¯¯äºŒï¼ši18nç±»å‹é—®é¢˜

##### åŸå› 

ç‰ˆæœ¬ä¸ä¸€è‡´

##### è§£å†³æ–¹æ¡ˆ

åˆ é™¤æ‰€æœ‰ @types/lingui ç›¸å…³å†…å®¹ï¼Œlinguiå…¶å®ä»v3.0ç‰ˆæœ¬åè‡ªå¸¦ç±»å‹å£°æ˜ï¼Œä¸éœ€è¦é¢å¤–å£°æ˜

### é”™è¯¯ä¸‰ï¼šæç¤ºæ‰¾ä¸åˆ° `@web3-react/abstract-connector`

##### åŸå› 

ç”±äºuniswapä¸­å…¶äº†åˆ«åï¼Œè€Œå¯¼è‡´@web3-react/abstract-connectorå¹¶æ²¡æœ‰æ­£ç¡®å®‰è£…ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨æŒ‡å®šå®‰è£…è¯¥åŒ…

##### è§£å†³æ–¹æ¡ˆ

æœ€å¤–å±‚package.jsoné”å®šç‰ˆæœ¬

```json
"resolutions": {
  "babel-loader": "8.1.0",
  "@types/react": "^17.0.1",
  "@web3-react/abstract-connector": "^6.0.7"
}
```

### é”™è¯¯å››ï¼šæç¤º `ConnectEvent.Update` æ‰¾ä¸åˆ°

##### åŸå› 

ä¾èµ–é—®é¢˜ï¼Œåˆ«åå®‰è£…å¯¼è‡´æ‰¾ä¸åˆ°æ­£ç¡® `@web3-react/types` åŒ…

##### è§£å†³æ–¹æ¡ˆ

å°† `@web3-react/core` ä» v8.xé™çº§åˆ°v6.x

```json
"@web3-react/core": "^6.0.7",
```

## 8 package.jsonä¸­çš„ `` ä½œç”¨

è¿›è¡Œ `yarn` ä¹‹åè‡ªåŠ¨æ‰§è¡Œå‘½ä»¤

```json
{
  "scripts" : {
    "prepare": "yarn contracts:compile && yarn graphql:generate && yarn i18n:compile",
  }
}
```

## 9 [styled-components | nextjs] Warning: Prop className did not match.

##### è§£å†³æ–¹æ¡ˆ

This fixed my issue :

```sh
yarn add --dev babel-plugin-styled-components
```

Then add this to `.babelrc` file:

```
{
    "presets": ["next/babel"],
    "plugins": [["styled-components", { "ssr": true }]]
}
```

[1] Warning: Prop className did not match. #7322.https://github.com/vercel/next.js/issues/7322

## 10 cra | nextjs å¯åŠ¨æ¢ç«¯å£

### cra

**Linux** (tested on Ubuntu 14.04/16.04) and **MacOS** (tested by @aswin-s on MacOS Sierra 10.12.4):

```js
"start": "PORT=3006 react-scripts start"
```

or (may be) more general solution by @IsaacPak

```js
"start": "export PORT=3006 react-scripts start"
```

**Windows** @JacobEnsor solution

```js
"start": "set PORT=3006 && react-scripts start"
```

æˆ–è€…å¯ä»¥ç”¨ `cross-env` è·¨ç«¯å®šä¹‰ç¯å¢ƒå˜é‡

### nextjs

```json
{
  "scripts": {
    "dev": "next -p 3002",
  }
}
```

[1] How to specify a port to run a create-react-app based project?.https://stackoverflow.com/questions/40714583/how-to-specify-a-port-to-run-a-create-react-app-based-project

[2] How to change port in nextjs?.https://medium.com/nextjs/how-to-change-port-in-nextjs-1b99930bb81f

## 11 npm åˆ«åå®‰è£…åŒ…

```json
{
  "devDependencies": {  
    "web3-react-injected-connector": "npm:@web3-react/injected-connector@^6.0.7", 
  }  
}
```

### use

```tsx
import { ... } from 'web3-react-injected-connector'
```

## 12 react18ç±»å‹é”™è¯¯

### åŸå› 

ç”±äºreactå°†react18ç½®ä¸ºé»˜è®¤ç‰ˆæœ¬ï¼Œè€Œæœ‰äº›åº“ä¼šå¹¶æ²¡æœ‰é™åˆ¶reactç‰ˆæœ¬ï¼Œæ‰€ä»¥å¯¼è‡´é”™è¯¯çš„å®‰è£…äº† `@types/react@^18`

### è§£å†³æ–¹æ¡ˆ

æœ€å¤–å±‚package.jsoné”å®š `@types/react` ç‰ˆæœ¬

```json
"resolutions": {
  "babel-loader": "8.1.0",
  "@types/react": "^17.0.1",
  "@web3-react/abstract-connector": "^6.0.7"
}
```

[1] Bug: React 18 types broken since the type release a view hours ago #24304.https://github.com/facebook/react/issues/24304
