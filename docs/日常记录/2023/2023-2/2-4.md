---
sidebar_position: 2
title: 2-4
tags:
  - æ—¥å¸¸è®°å½•
---



## 1 NavieUI ä¸»é¢˜é…ç½®æ–¹æ³•

> TODO

## 2 viteé¡¹ç›®å¯¼å…¥å¤–éƒ¨åŒ…æ¨¡å—

æè¿°ï¼š

```sh
Packages
  | åŒ…A
  | åŒ…B
	| åŒ…C
```

å¦‚ä½•åœ¨åŒ…Aä¸­å¯¼å…¥åŒ…Bä¸­å†…å®¹ï¼Ÿ

> TODO

## 3 Axios ä¸‹è½½æ–‡ä»¶æµæ–¹æ³•

1.æ–‡ä»¶æµæ˜¯ä»€ä¹ˆï¼Ÿ

2.åç«¯å¦‚ä½•å®ç°ï¼Œå‰ç«¯å¦‚ä½•ä¸‹è½½ï¼Ÿ

> TODO

## 4 Proxy å¯¹è±¡è½¬æ™®é€šå¯¹è±¡

```ts
JSON.parse(JSON.stringify(your.object))
```

## 5 å®ç°0.5pxè¾¹æ¡†

```css
.border::after { 
  content: '';
  position: absolute;  /* æŠŠçˆ¶è§†å›¾è®¾ç½®ä¸ºrelativeï¼Œæ–¹ä¾¿å®šä½*/
  top: 0;
  left: 0;
  width: 200%;
  height: 200%;
  transform: scale(0.5);
  transform-origin: 0 0;
  box-sizing: border-box;
  border-radius: 40rpx;
  border: 1px solid #fff;
}
```

[1 ] [å¾®ä¿¡å°ç¨‹åº 0.5pxçš„borderåœ¨iosä¸Šæ˜¾ç¤ºç²—ç»†ä¸å‡åŒ€çš„è§£å†³æ–¹æ³•](https://www.jianshu.com/p/898d873d786c)

## 6 Electron è‡ªå®šä¹‰èœå•

```ts
import {Menu, app} from 'electron';

export function createMenu() {
  if (process.env.NODE_ENV !== 'development') {
    const template: any[] = [
      {
        label: 'Edit',
        submenu: [
          {label: 'Undo', accelerator: 'CmdOrCtrl+Z', selector: 'undo:'},
          {label: 'Redo', accelerator: 'Shift+CmdOrCtrl+Z', selector: 'redo:'},
          {type: 'separator'},
          {label: 'Cut', accelerator: 'CmdOrCtrl+X', selector: 'cut:'},
          {label: 'Copy', accelerator: 'CmdOrCtrl+C', selector: 'copy:'},
          {label: 'Paste', accelerator: 'CmdOrCtrl+V', selector: 'paste:'},
          {label: 'Select All', accelerator: 'CmdOrCtrl+A', selector: 'selectAll:'},
          {
            label: 'Quit',
            accelerator: 'CmdOrCtrl+Q',
            click() {
              app.quit();
            },
          },
        ],
      },
    ];

    const menu = Menu.buildFromTemplate(template);
    Menu.setApplicationMenu(menu);
  }
}
```

## 7 è§£å†³ MAC æ— æ³•æ‰“å¼€â€œ***â€ï¼Œå› ä¸ºæ— æ³•éªŒè¯å¼€å‘è€…

ä» è®¿ç­”-åº”ç”¨ç¨‹åºï¼Œå³é”®-æ‰“å¼€

[1] [è§£å†³ MAC æ— æ³•æ‰“å¼€â€œ***â€ï¼Œå› ä¸ºæ— æ³•éªŒè¯å¼€å‘è€…](https://blog.csdn.net/qq_32828933/article/details/108334190)

## 8 Electron æ‰“åŒ…ã€å‘å¸ƒå’Œè‡ªåŠ¨æ›´æ–°

### æ‰“åŒ…å’Œå‘å¸ƒ

ä½¿ç”¨ [electron-builder](https://www.electron.build/) æ‰“åŒ…ï¼Œå¸¸è§é…ç½® `.electron-builder.config.js`ï¼š

```json
/**
 * TODO: Rewrite this config to ESM
 * But currently electron-builder doesn't support ESM configs
 * @see https://github.com/develar/read-config-file/issues/10
 */

/**
 * @type {() => import('electron-builder').Configuration}
 * @see https://www.electron.build/configuration/configuration
 */
module.exports = async function () {
  const {getVersion} = await import('./version/getVersion.mjs');

  return {
    directories: {
      output: 'dist',
      buildResources: 'buildResources',
    },
    productName: 'Dragon Proxies', // TODO Dynamically fetch name
    files: ['packages/**/dist/**'],
    extraMetadata: {
      version: getVersion(),
    },

    win: {
      target: 'nsis',
    },

    // Specify linux target just for disabling snap compilation
    linux: {
      target: 'deb',
    },
  };
};
```

æ‰“åŒ…å‘½ä»¤ï¼š

```sh
# æœ¬æœºæ‰“åŒ…
electron-builder build --config .electron-builder.config.js --dir --config.asar=false

# æœ¬æœºæ‰“åŒ…ã€å¹¶å‘å¸ƒ
# å‘å¸ƒé€šè¿‡ .electron-builder.config.js çš„ publish å­—æ®µé…ç½®
# é»˜è®¤å‘å¸ƒåˆ°github
# ä»¥ä¸Šç¤ºä¾‹ä¸ºå‘å¸ƒåˆ°é˜¿é‡Œäº‘oss
electron-builder --config .electron-builder.config.js --publish always
```

##### é˜¿é‡Œäº‘osså‘å¸ƒ

æ ¹æ® [electron-publisher-alioss](https://github.com/uihoh0/electron-publisher-alioss) è¿›è¡Œé…ç½®ï¼Œä¸»è¦æ³¨æ„ä¸‹é¢ `generic` å’Œ `custom` çš„è·¯å¾„é—®é¢˜ï¼š

`.electron-builder.config.js` ä¸­åŠ å…¥ publish å­—æ®µ

```js
// release config
publish: [
  {
    provider: 'generic',
    // è¿™é‡Œä¸ºä¸‹è½½åœ°å€ï¼Œnameè¡¨ç¤ºé¡¹ç›®åï¼Œosè¡¨ç¤ºæ“ä½œç³»ç»Ÿ
    // è¯¦è§ TODO
    url: 'https://download.dragonbot.io/${name}/${os}',
  },
  {
    provider: 'custom',
    providerName: 'alioss',
    // ä¸Šä¼ çš„è·¯å¾„
    path: '/${name}/${os}',

    bucket: 'dragonaio',
    region: 'oss-accelerate',
    accessKeyId: '',
    accessKeySecret: '',
    resumable: true,
    maxResume: 5,
    verbose: true,
  },
]
```

### è‡ªåŠ¨æ›´æ–°

> æ³¨æ„ï¼š
>
> - é€šè¿‡ `electron-updater` å®ç°è‡ªåŠ¨æ›´æ–°ï¼Œè¯¦è§ [Auto Update](https://www.electron.build/auto-update.html)
> - Macè‡ªåŠ¨æ›´æ–°éœ€è¦ç­¾åï¼Œç­¾åéœ€è¦è´¹ç”¨

ç¤ºä¾‹ä»£ç 

```ts
import {autoUpdater} from 'electron-updater';

app
  .whenReady()
  .then(() => {
  return autoUpdater.checkForUpdatesAndNotify();
})
  .catch(e => console.error('Failed check and install updates:', e));
```

ä¹‹åï¼Œå¦‚æœæœ‰æ›´æ–°ï¼Œåˆ™ä¼šè‡ªåŠ¨ä¸‹è½½å¹¶æ›´æ–°ï¼ˆç›¸å½“äºå¼ºåˆ¶æ›´æ–°ï¼‰ï¼Œè‹¥è¦å®ç°æ‰‹åŠ¨æ›´æ–°ï¼Œè§ [encapsulated manual update via menu](https://github.com/electron-userland/electron-builder/blob/docs/encapsulated manual update via menu.js)

##### win10ç›¸å…³

- win10è°ƒè¯•æ–¹æ³•

  >åœ¨ Windows ä¸Šï¼Œå¦‚æœæ‚¨æƒ³æŸ¥çœ‹åŒ…å«æ¥è‡ª console.log() çš„æ‰€æœ‰æ¶ˆæ¯çš„æ§åˆ¶å°ï¼Œåˆ™å¿…é¡»ä½¿ç”¨å‚æ•°--enable-loggingå¯åŠ¨æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚ï¼š MyApp.exe --enable-logging

- win10è‡ªåŠ¨æ›´æ–°æ–‡ä»¶ä¸‹è½½è·¯å¾„ï¼š

  `C:\Users\ginlink\AppData\Local\krait-tester-updater\pending`

##### electron æ¨¡æ‹Ÿæ‰“åŒ…ç¯å¢ƒ

```ts
Object.defineProperty(app, 'isPackaged', {
  get() {
    return true;
  }
});
```

## 9 Electron æ— æ³•å®‰è£…é—®é¢˜

åŸå› ï¼šç½‘ç»œåŸå› 

è§£å†³æ–¹æ¡ˆï¼š

- è®¾ç½® electron çš„ä¸‹è½½åœ°å€

  ```sh
  # win cmd
  set ELECTRON_MIRROR=https://npmmirror.com/mirrors/electron/
  npm install --registry=https://registry.npmmirror.com -D electron
  ```

[1] [npmä½¿ç”¨å›½å†…é•œåƒå®‰è£…Electron](https://mjpclab.site/uncategorized/npm-install-electron-by-mirror)

## 10 Electron åœ¨winä¸‹æ‹–æ‹½é—®é¢˜

è§£å†³æ€è·¯ï¼šç»™å¤–éƒ¨å®¹å™¨è®¾ç½®å¯æ‹–æ‹½ï¼Œç»™å†…éƒ¨æŒ‰é’®è®¾ç½®ä¸å¯æ‹–æ‹½

```ts
.draggable {
  -webkit-app-region: drag;
}

.un-draggable {
  -webkit-app-region: no-drag;
}
```

## 11 request-promise å–æ¶ˆ

```ts
import rp from 'request-promise';
import {collar} from 'js-flock';

// 'collar' for timeout
const response = await collar(
  (() =>
   new Promise((resolve, reject) => {
    const promise = rp.get(judge, {
      ...this.initialRequestConfig,
      ...this.getAgent(proxyObject, protocol),
    });

    this.cancelTokens.push(promise);

    promise.then(resolve).catch(reject);
  }))(),
  this.initialRequestConfig.timeout,
);
```

æ‰©å±•ï¼šå¦‚ä½•ç»ˆæ­¢ promise ?

>TODO

## 12 Electron win ç­¾å

é—®é¢˜ï¼š

- å¦‚ä½•ç­¾åï¼Ÿ

- .pfx æ˜¯ä»€ä¹ˆæ–‡ä»¶ï¼Ÿä¸ºä»€ä¹ˆåœ¨æœ¬æœºå¯ä»¥ç­¾åï¼Œåœ¨ github actions æ— æ³•ç­¾å

  é”™è¯¯ï¼š`SignTool Error: No certificates were found that met all the given criteria.`

  [1] [Windows 10: SignTool Error: No certificates were found that met all the given criteria. #1673](https://github.com/electron-userland/electron-builder/issues/1673)

## 13 Http çŠ¶æ€ç æšä¸¾

[1] [HttpStatusCode.ts](https://gist.github.com/scokmen/f813c904ef79022e84ab2409574d1b45)

[2] [status-code-enum](https://www.npmjs.com/package/status-code-enum)

## 14 æ£€æŸ¥ ipv6

[1] http://ip6.me/api/

## 15 è§£æ proxy url

> TODO

[1] https://www.npmjs.com/search?q=proxy%20url%20parse

[2] [proxy-string-parser](https://www.npmjs.com/package/proxy-string-parser)

## 16 Parallels ç§‘æŠ€

[1] [Parallels Desktop v18.0.0(53049) æ°¸ä¹…ä¸­æ–‡ç ´è§£ç‰ˆ pdè™šæ‹Ÿæœº ï¼ˆæ”¯æŒM1-intelï¼‰ğŸŒŸé™„WIN10-11çº¯å‡€ç³»ç»Ÿ- (30Gæ•´ç†ï¼‰pdå¯åŠ¨å™¨v0.3.8](https://www.macat.vip/6746.html)

## 17 Vue h æ¸²æŸ“å‡½æ•°

> TODO

```ts
// åŸºç¡€
const textEl = h('div', {}, {default: () => 'text'})

// å¤šæ’æ§½
const otherEl = h('div', {}, {default: () => 'text', otherSlot: ()=> 'other'})

// æ•°ç»„
h('div', {}, {default: () => [textEl, otherEl]})
```

æ³¨æ„ï¼šdefault ç­‰æ’æ§½æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¦åˆ™ä¼šæœ‰æ€§èƒ½é—®é¢˜

## 18 Electron preload è¿è¡Œåœ¨å“ªé‡Œ

> TODO

## 19 å°ç¨‹åº van-tabbar é®æŒ¡é—®é¢˜

è§£å†³æ–¹æ¡ˆ

```css
page {
  position: relative;
  z-index: 10000;
}
```

## 20 Electron è·¯å¾„é—®é¢˜

> TODO

- process.resourcesPath
- app.getAppPath()

## 21 node-libcurl ç‰ˆæœ¬é—®é¢˜

å¹³å°é—®é¢˜ï¼šM1 mac: mach-o file, but is an incompatible architecture (have 'x86_64', need 'arm64e')

è§£å†³æ–¹æ¡ˆï¼šæ‰‹åŠ¨ä¸‹è½½å¯¹åº” [release](https://github.com/JCMais/node-libcurl/releases) çš„æ–‡ä»¶ node-libcurl.nodeï¼Œåæ”¾å…¥`node_modules/node-libcurl/lib/bindding/` ç›®å½•ä¸‹

æ³¨æ„ï¼šelectron çš„ç‰ˆæœ¬è¦å¯¹åº”

## 22 acro-design work

```sh
git@github.com:qingqingxuan/arco-work.git
```

