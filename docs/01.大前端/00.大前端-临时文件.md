---
title: 大前端-临时文件
categories:
  - 大前端
tags:
  - tmp

---

临时放置，待归档



# 25 如何将BigNumber转为数字？

```ts
Number(bigNumber.toString()) / 10 ** 18
```

> 注意

BigNumber.js库和BN.js库有区别，BN不支持小数，所以我喜欢把Bn.js称为BigNumber，而BigNumber.js称为BigFloatNumber

```ts
import BigFloatNumber from 'bignumber.js'

const a = new BigFloatNumber(5)
```

而且两者的API也不尽相同

[1] BigNumber官方文档.https://mikemcl.github.io/bignumber.js/#div

[2] Bn.js项目地址.https://github.com/indutny/bn.js/



# 29 useState是深拷贝吗？

是深拷贝

# 30 toLocalString【数字方法】内部会调用Number

而Number并不会保留末尾为0的小数

```ts
Number(1.00)
Number('1.00')
Number(1.01)
Number('1.01')

=> 1
=> 1
=> 1.01
=> 1.01
```

也就是说，如果想根据千分位分割数字，那么 `toLocalString` 并非一个完全好用的方法

> 那怎么解决呢？【自写分割函数】

```ts
export function divNum(num: string) {
  let tmp: Array < string > , s1: string, s2: string, rgx: RegExp;
  // if(typeof num == 'number') (num as unknown as string) += ''

  tmp = num.split('.')
  s1 = tmp[0]
  s2 = tmp[1]

  rgx = /(\d+)(\d{3})/;
  while (rgx.test(s1)) {
    s1 = s1.replace(rgx, '$1' + ',' + '$2');
  }
  s2 = s2 && s2.length > 0 ? '.' + s2 : ''

  return s1 + s2;
  // 特殊情况，传入'1.00'，依旧保留末尾两个0
}

console.log('[]:', divNum('123456789'))
console.log('[]:', divNum('123456789.0'))
console.log('[]:', divNum('123456789.99'))

console.log('[]:', divNum('1234567890'))
console.log('[]:', divNum('1234567890.0'))
console.log('[]:', divNum('1234567890.99'))
```

核心点

```ts
(\d+)(\d{3})

123456789
// 第一次将匹配$1为123456  $2为789
```

 
