---
title: 01.JS中的数组
categories:
  - 大前端
tags:
  - js数组
---

js数组是js最强大的数据类型，用的也是最多的，所以整理一下容易出错的点



## 1 数组排序

js数组排序默认并**不**是从小到大排序的，所以需要写清楚

```ts
function tSort(data) {
    return data.sort((a, b) => a.num - b.num)
}

let data = [{ name: 'aaa', num: 2 }, { name: 'bbb', num: 1 }]
console.log('[]:', tSort(data))
```

## 2 数组的reduce累加方法

我们知道数组方法可以分为三类：`构造器方法`，`访问器方法` 和 `迭代器方法`[1]

迭代器方法有遍历，查找，过滤，累加等

这里看一下 `reduce`累加

```ts
arr.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue])
```

在刚开始学习的时候，我一直没理解reduce的 `accumulator`是什么，以前是这么写的

```ts
arr.reduce((prev, curr)=> prev + curr)
```

就一直认为prev表示上一个值，其实理解有偏差，正确应该这么写 更加符合语义

```ts
arr.reduce((acc, curr)=> acc + curr)
```

特别是在给定初始值的时候

```ts
arr.reduce((acc, curr)=> acc + curr, 0)
```



注意

- 还有 `reduceRight`从右向左累加的方法

- 迭代器每次只能处理一个元素【重点】

> 参考

[1] MDN数组. 

## 3 Array.prototype.slice()手写

```ts
Array.prototype.slice1 = function (start, end) {
  // 这里不能写成箭头函数，因为this作用域问题
  let len = this.length, tmp = []

  let l = (start === undefined) ? 0 : (start < 0) ? Math.max(len + start, 0) : Math.min(start, len)
  let r = (end === undefined) ? len : (end < 0) ? Math.max(len + end, 0) : Math.min(end, len)
  // max()和min()是为了保证安全的访问数据，也就是允许犯错一次，但第二次再犯错，就限制你。
  // 这也是slice与substring最大的区别，substring不允许犯错。

  // 注意，此处必为不等形式，否则无法满足左开右闭，
  // 所以上面end===undefined的时候，就只能取len了
  while (l < r) tmp.push(this[l++])
  return tmp
}

let tmp = [1, 2, 3, 4, 5]
console.log('[res]:', tmp.slice1(0, -2))
```

[1] MDN的slice.https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/slice

# 4 js中判断为数组类型的最佳方式-Array.isArray()

```ts
Array.isArray([1, 2, 3]);

Array.isArray({foo: 123});

Array.isArray("foobar");

Array.isArray(undefined);
==>
  true
	false
	false
	false
```

ECMAScript 5 定义了一个方法`Array.isArray`来彻底解决这个问题。如果提供的第一个参数是在任何窗口中创建的数组对象，则返回`true`；如果未提供任何参数或第一个参数不是数组对象，则返回`false`.

[1] 严格判定JavaScript对象是否为数组.https://web.mit.edu/jwalden/www/isArray.html

[2] Array.isArray().https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray

